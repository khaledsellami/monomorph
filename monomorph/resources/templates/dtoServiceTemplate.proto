{# Jinja2 template for a base proto file #}
{# Variables:
    package_name:                   The proto package for the service class.
    service_name:                   The name of the new service class.
    class_name:                     The name of the class to be refactored.
    dto_name:                       The name of the corresponding DTO.
    references_mapping              A dictionary containing information about referenced API classes
        references_mapping.dto:     A dictionary mapping classes that were refactored with the DTO pattern
            c_name:                 The name of the class.
            api_class:              Its metadata class.
                client_name:        The name of the client class.
                dto_name:           The simple name of the DTO class.
                proto_package:      The package name of the DTO class.
                mapper_name:        The fully qualified name of the mapper class.
                proto_filename:     The name of the proto file that contains the DTO class.
        references_mapping.idbased: A dictionary mapping classes that were refactored with the ID pattern (same as above)
#}
syntax = "proto3";

package {{ package_name }};

option java_multiple_files = true;
option java_package = "{{ package_name }}";

{% if references_mapping.idbased %}
import "shared.proto"; // for RefactoredObjectID
{% endif %}
{% if references_mapping.dto %}
    {% for c_api_class in references_mapping.dto.values() %}
import "{{ c_api_class.proto_filename }}"; // For {{ c_api_class.dto_name }}
    {% endfor %}
{% endif %}

{% if service_name %}
service {{ service_name }} {
    // add {{ class_name }} specified methods
}
{% endif %}

message {{ dto_name }} {
    // add {{ class_name }} specified fields
}

{% if service_name %}
// Replace with an actual request and response message
message ExampleRequestToBeReplaced {
    {{ dto_name }} dto = 1;
    // Other method arguments specific fields
}

message ExampleResponseToBeReplaced {
    {{ dto_name }} dto = 1;
    // method return type equivalent
}
{% endif %}

// Add other messages and enums as needed